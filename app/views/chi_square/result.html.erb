<div class="container">

  <div class="row">
    <div class="col-sm-8">
      <h1>Chi-Square Tests</h1>
    </div>
    <div class="col-sm-4 text-right">
      <small>by <a href="http://www.rodrigoquaresma.com.br">rodrigo quaresma</a></small>
    </div>
  </div>

  <h2>for a 2x2 table</h2>

  <div class="row">
    <div class="col-sm-8">

      <%= form_tag(chi_calculate_path, method: "post") do %>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">confidence interval around two independent means</h3>
        </div>
        <div class="panel-body form-horizontal">
          <div class="form-group row-gutter-xs">
            <div class="col-sm-4">
            </div>
            <div class="col-sm-4 form-control-label">
              <span>visitors</span>
            </div>
            <div class="col-sm-4 form-control-label">
              <span>goals</span>
            </div>
          </div>

          <div class="form-group row-gutter-xs">
            <label class="col-sm-4 control-label form-control-label">
              <span>group A</span>
            </label>
            <div class="col-sm-4">
              <%= text_field_tag(:number_group_a_v, @value_m, class: 'form-control') %>
            </div>
            <div class="col-sm-4">
              <%= text_field_tag(:number_group_a_g, @value_a, class: 'form-control') %>
            </div>
          </div>
          <div class="form-group row-gutter-xs">
            <label class="col-sm-4 control-label form-control-label">
              <span>group B</span>
            </label>
            <div class="col-sm-4">
              <%= text_field_tag(:number_group_b_v, @value_n, class: 'form-control') %>
            </div>
            <div class="col-sm-4">
              <%= text_field_tag(:number_group_b_g, @value_c, class: 'form-control') %>
            </div>
          </div>
        </div>
        <div class="panel-footer">
          <%= submit_tag 'Go!', class: 'btn btn-primary' %>
        </div>
      </div>
      <% end %>


      <table class="table">
        <thead>
          <tr>
            <th style="width:35%">method</th>
            <th style="width:30%">p-value<br>int. confidence</th>
            <th style="width:35%">notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>N - 1 Chi-Square/N - 1 Two-Proportion Test</td>
            <td>
              <p><%= @nChiSquare %></p>
              <p><%= @nChiSquare_pValue %></p>
              <p><%= @nchiSquare_ConfidenceInterval %></p>
            </td>
            <td>Recommended: when expected cell counts are all > 1</td>
          </tr>
          <tr>
            <td>Chi-Square/Two-Proportion Test</td>
            <td>
              <p><%= @chiSquare %></p>
              <p><%= @chiSquare_pValue %></p>
              <p><%= @chiSquare_ConfidenceInterval %></p>
            </td>
            <td>Not recommended: understates true probability for small sample sizes</td>
          </tr>
          <tr>
            <td>Chi-Square with Yates Correction</td>
            <td>
              <p><%= @yatesChiSquare %></p>
              <p><%= @yatesChiSquare_pValue %></p>
              <p><%= @yatesChiSquare_ConfidenceInterval %></p>
            </td>
            <td>Not recommended: overstates true probability for all sample sizes</td>
          </tr>
          <tr>
            <td>Fisher Exact Test</td>
            <td>
              <p><%= @fisherExactTest %></p>
              <p><%= @fisherExactTest_pValue %></p>
              <p><%= @fisherExactTest_ConfidenceInterval %></p>
            </td>
            <td>Recommended: when any expected cell count is < 1</td>
          </tr>
        </tbody>
      </table>

    </div>
    <div class="col-sm-4">
      <p>Degree of freedom <span>1</span></p>
      <p>Conversion rate A: <span><%=@function_conversionRates[0]%>%</span></p>
      <p>Conversion rate B: <span><%=@function_conversionRates[1]%>%</span></p>
      <p>Intervalo de confiança: <span><%=@function_confidenceInterval%></span></p>
      <p>Intervalo de confiança: <span><%=@confidenceInterval%></span></p>
      <hr />
      <p>show_me_the_number: <span><%=@show_me_the_number%></span></p>
      <p>function_cs: <span><%=@function_cs%></span></p>
      <p>vns: <span><%=@vns%></span></p>
      <p>z: <span><%=@vz%></span></p>
      <p>function_Norm: <span><%=@function_Norm%></span></p>
      <p>function_isSmallSampleSizes: <span><%=@function_isSmallSampleSizes%></span></p>
      <p>function_conversionRates: <span><%=@function_conversionRates%></span></p>
      <p>function_csny: <span><%=@function_csny%></span></p>
      <p>function_Ln: <span><%=@function_Ln%></span></p>

      <hr />
      <p>The calculator below can be used to interpret the results of a usability-oriented split (A/B) test. This is a basic scenario where you have two groups of Visitors (A & B) who each get to see one version of your website and for whom you track the number of Conversions or Goals (purchases, downloads, click-throughs, etc.).</p>
    </div>
  </div>

</div>
